{
	"name": "Existing Docker Compose (Extend)",

	"dockerComposeFile": [
		"../docker-compose.yml",
		"docker-compose.yml"
	],

	"service": "stock-service",

	"workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",

	
	"features": {
		"ghcr.io/devcontainers/features/docker-outside-of-docker:1": {
			"version":"latest",
			"moby":false
		},
		"ghcr.io/devcontainers/features/github-cli:1": {},
		"ghcr.io/devcontainers/features/azure-cli:1": {},
  	    "ghcr.io/devcontainers/features/common-utils:2": {
			"installZsh": true,
			"configureZshAsDefaultShell": true,
			"username": "vscode",
			"upgradePackages": false
		},
		// poetry feature not needed as used in Dockerfile
		//"ghcr.io/devcontainers-extra/features/poetry:2": {}

		// Add Node.js for frontend development
		"ghcr.io/devcontainers/features/node:1": {
			"nodeGypDependencies": true,
			"version": "20"
		}
	},
	
	// Tell VS Code to use Zsh as the default terminal
	"customizations": {
	  "vscode": {
		"settings": {
		  "terminal.integrated.defaultProfile.linux": "zsh"
		},
		"extensions": [
			"ms-python.vscode-pylance",
			"ms-python.python",
			"ms-python.debugpy",
			"ms-vscode.live-server",
			"ms-python.pylint",
			"EricSia.pythonsnippets3",
			"tamasfe.even-better-toml",
			"charliermarsh.ruff",
			"ms-vscode.azure-account",
			"ms-azuretools.vscode-azureresourcegroups",
			"ms-azuretools.vscode-azurefunctions",
			"anthropic.claude-code"
		]
	  }
	},

   "postStartCommand": "npm install -g @anthropic-ai/claude-code; npm install -g @google/gemini-cli@latest"

}